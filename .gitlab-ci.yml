stages:
  - build

variables:
  GIT_CLONE_PATH: $CI_BUILDS_DIR/$CI_COMMIT_REF_SLUG

cache:
  key: "$CI_COMMIT_REF_SLUG"
  paths:
    - externallibs/

build:
  stage: build

  script:
    ./buildFromScratch.sh astra_trunk/trunk

  environment:
    ENABLE_ORACLE="1"

  artifacts:
    name: "tclmonlog"
    paths:
      - src/tclmon.log
    when: on_failure
