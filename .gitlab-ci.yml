stages:
  - build
  - test

cache:
  paths:
    - externallibs/
    - src/astra

build:
  stage: build

  script:
    ./buildFromScratch.sh astra_trunk/trunk --build_external_libs --configlibs --buildlibs --configastra --buildastra --createdb

  #artifacts:
  #  paths:
  #    - src/Makefile

test:
  stage: test

  script:
    ./buildFromScratch.sh astra_trunk/trunk --createtcl --createdb --runtests
