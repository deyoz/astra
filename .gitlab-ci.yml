stages:
  - build
  - test

cache:
  paths:
    - externallibs/
    - src/

build:
  stage: build

  script:
    ./buildFromScratch.sh astra_trunk/trunk --build_external_libs --configlibs --buildlibs --configastra --buildastra

  artifacts:
    paths:    
    - locallibs/env_file
    - locallibs/external_env_file
    - Makefile

test:
  stage: test

  script:
    ./buildFromScratch.sh astra_trunk/trunk --createtcl --createdb --runtests
