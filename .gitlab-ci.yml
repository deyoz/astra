stages:
  - build
  - test

cache:
  paths:
    - externallibs/

build:
  stage: build

  script:
    ./buildFromScratch.sh astra_trunk/trunk --build_external_libs --configlibs --buildlibs --configastra --buildastra

  artifacts:
    paths:
      - src/
    exclude:
      - src/**/*.o

test:
  stage: test

  script:
    ./buildFromScratch.sh astra_trunk/trunk --createtcl --createdb --runtests
